{% extends "base.html" %}
{% import "_macros.html" as macros %}
{% block title %}Lista postów(Panel) - {% endblock %}
{% block meta %}<meta name="robots" content="noindex">{% endblock %}
{% block content %}
<div class="flex-col bg-gray-800 px-6 py-6">
    {% with messages = get_flashed_messages() %}
    {% if messages %}
        <ul class=flashes>
        {% for message in messages %}
            <li>{{ message }}</li>
        {% endfor %}
        </ul>
    {% endif %}
    {% endwith %}
    <div><h2>Lista postów</h2></div>
    <div class="post-actions">
        <a href="{{ url_for('.add_post') }}">Dodaj post</a>
    </div>
    {% if page %}
    {% for post in page %}
    <div class="post py-6">
        <h3>{{ post.title }}</h3>
        {% if post.author == current_user or current_user.is_administrator() %}
        <div><a href="{{ url_for('.edit_post', id=post.id) }}">Edytuj post</a></div>
        <div><a href="{{ url_for('.show_post', id=post.id) }}">Podejrzyj post</a></div>
        <div><a href="{{ url_for('.delete_post', id=post.id) }}" onclick="return confirm('Czy jesteś pewien, że chcesz usunąć post?');">Usuń post</a></div>
        {% endif %}
    </div>
    {% endfor %}
    {% endif %}
    {{ macros.render_pagination(page, '.posts_list') }}
</div>
{% endblock %}